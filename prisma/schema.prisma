// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Hoa {
  id               String             @id @default(uuid())
  accountNumber    String
  firstName        String
  lastName         String
  block            String
  lot              String
  contactNumber    String
  email            String
  isAdmin          Boolean            @default(false)
  isWaterActive    Boolean            @default(false)
  role             String
  waterConsumption WaterConsumption[] @relation("WaterConsumption")
  waterBilling     WaterBilling[]     @relation("WaterBilling")
  sticker          Sticker[]          @relation("Sticker")
  dues             Dues[]             @relation("Dues")
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model WaterConsumption {
  id           String   @id @default(uuid())
  hoaId        String
  previousRead String
  currentRead  String
  consumption  String
  hoa          Hoa      @relation("WaterConsumption", fields: [hoaId], references: [id])
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model WaterBilling {
  id          String   @id @default(uuid())
  hoaId       String
  billingDate String
  amount      Float
  isPaid      Boolean  @default(false)
  remarks     String
  hoa         Hoa      @relation("WaterBilling", fields: [hoaId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model WaterPrice {
  id        String   @id @default(uuid())
  price     Float
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Dues {
  id        String   @id @default(uuid())
  hoaId     String
  amount    Float
  hoa       Hoa      @relation("Dues", fields: [hoaId], references: [id])
  isPaid    Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model DuesPrice {
  id        String   @id @default(uuid())
  price     Float
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Sticker {
  id            String    @id @default(uuid())
  hoaId         String
  name          String
  block         String
  lot           String
  stickerDate   String
  stickerNumber String
  stickerColor  String
  role          Role      @default(HOA)
  quantity      Int       @default(1)
  amount        Float     @default(0)
  hoa           Hoa       @relation("Sticker", fields: [hoaId], references: [id])
  vehicle       Vehicle[] @relation("Vehicle")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Vehicle {
  id            String   @id @default(uuid())
  stickerId     String
  sticker       Sticker  @relation("Vehicle", fields: [stickerId], references: [id])
  plate         String
  vehicleType   String
  color         String
  driverLicense String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model StickerPrice {
  id        String   @id @default(uuid())
  price     Float
  color     Color    @default(GREEN)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Status {
  ACTIVE
  INACTIVE
}

enum Role {
  HOA
  TENANT
  DELIVERY
  VISITOR
  SPECIAL
}

enum Color {
  GREEN
  YELLOW
  RED
  WHITE
  SILVER
}
