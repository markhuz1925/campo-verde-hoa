// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Resident {
  id               String             @id @default(uuid())
  accountNumber    Int                @default(autoincrement())
  name             String
  phase            String
  block            String
  lot              String
  contactNumber    String?
  email            String?
  isAdmin          Boolean            @default(false)
  isWaterActive    Boolean?           @default(false)
  role             String
  waterConsumption WaterConsumption[] @relation("WaterConsumption")
  waterBilling     WaterBilling[]     @relation("WaterBilling")
  dues             Dues[]             @relation("Dues")
  stickers         Sticker[]          @relation("stickerToResident")
  userId           String
  createdAt        DateTime           @default(now())
  updatedAt        DateTime           @updatedAt
}

model WaterConsumption {
  id           String   @id @default(uuid())
  residentId   String
  previousRead String
  currentRead  String
  consumption  String
  resident     Resident @relation("WaterConsumption", fields: [residentId], references: [id])
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model WaterBilling {
  id          String   @id @default(uuid())
  residentId  String
  billingDate String
  amount      Float
  isPaid      Boolean  @default(false)
  remarks     String
  resident    Resident @relation("WaterBilling", fields: [residentId], references: [id])
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model WaterPrice {
  id        String   @id @default(uuid())
  price     Float
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Dues {
  id         String   @id @default(uuid())
  residentId String
  amount     Float
  resident   Resident @relation("Dues", fields: [residentId], references: [id])
  isPaid     Boolean  @default(false)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model DuesPrice {
  id        String   @id @default(uuid())
  price     Decimal  @db.Decimal(10, 2)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Sticker {
  id            String    @id @default(uuid())
  name          String
  residentId    String
  resident      Resident  @relation("stickerToResident", fields: [residentId], references: [id])
  stickerDate   String
  stickerNumber String
  stickerColor  String
  role          Role      @default(RESIDENT)
  quantity      Int       @default(1)
  amount        Float     @default(0)
  vehicle       Vehicle[] @relation("Vehicle")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
}

model Vehicle {
  id            String   @id @default(uuid())
  stickerId     String
  sticker       Sticker  @relation("Vehicle", fields: [stickerId], references: [id])
  plate         String
  vehicleType   String
  color         String
  driverLicense String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
}

model StickerPrice {
  id        String   @id @default(uuid())
  name      String
  price     Decimal  @db.Decimal(10, 2)
  color     Color    @default(GREEN)
  userId    String
  isActive  Boolean  @default(false)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Log {
  id        String   @id @default(uuid())
  title     String
  userId    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

enum Status {
  ACTIVE
  INACTIVE
}

enum Role {
  RESIDENT
  TENANT
  DELIVERY
  VISITOR
  SPECIAL
}

enum Color {
  GREEN
  YELLOW
  RED
  WHITE
  SILVER
}
